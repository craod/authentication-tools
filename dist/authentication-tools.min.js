!function(){"use strict";angular.module("authentication-tools",["ngCookies"])}(),function(){"use strict";function a(){function a(a){return{request:function(c){if(0===c.url.indexOf(b.baseUrl)){var d=a.get(b.cookiePrefix+"guid"),e=a.get(b.cookiePrefix+"token");d&&e&&(c.headers["Craod-Guid"]=d,c.headers["Craod-Token"]=e)}return c}}}var b=this;b.baseUrl="",b.cookiePrefix="AuthenticationService_",a.$inject=["$cookies"],b.$get=a}angular.module("authentication-tools").provider("TokenInjector",a)}(),function(){"use strict";function a(){function a(a,c,d){var e={};return e.setCurrentUser=function(a){e.currentUser=a},e.getCurrentUser=function(){return e.currentUser},e.isAuthenticated=function(){return!!e.currentUser},e.shouldAuthenticate=function(){var a=d.get(b.cookiePrefix+"guid"),c=d.get(b.cookiePrefix+"token");return!a||!c},e.removeCurrentUser=function(){delete e.currentUser,d.remove(b.cookiePrefix+"guid"),d.remove(b.cookiePrefix+"token")},e.signIn=function(a){var f,g=b.endpoints.login;return f=c({method:"POST",url:g,data:a}),f.then(function(c){var e,f={};a.rememberMe&&(e=new Date,e.setDate(e.getDate()+90),f.expires=e),d.put(b.cookiePrefix+"guid",c.data.guid,f),d.put(b.cookiePrefix+"token",c.data.token,f)},function(){e.removeCurrentUser()}),f},e.validate=function(){var f=d.get(b.cookiePrefix+"guid"),g=d.get(b.cookiePrefix+"token");if(e.shouldAuthenticate()){e.currentUser=void 0;var h=a.defer();return h.reject(),h.promise}e.validating=!0;var i,j=b.endpoints.validate;return i=c({method:"POST",url:j,data:{guid:f,token:g}}),i.then(function(a){e.setCurrentUser(a.data)},function(){e.removeCurrentUser()}),i["finally"](function(){delete e.validating}),i},e.signOut=function(){var f=d.get(b.cookiePrefix+"guid"),g=d.get(b.cookiePrefix+"token");if(e.removeCurrentUser(),!f||!g){var h=a.defer();return h.resolve(),h.promise}return c({method:"POST",url:b.endpoints.logout,data:{guid:f,token:g}})},e}var b=this;b.cookiePrefix="AuthenticationService_",b.endpoints={},a.$inject=["$q","$http","$cookies"],b.$get=a}angular.module("authentication-tools").provider("AuthenticationService",a)}();